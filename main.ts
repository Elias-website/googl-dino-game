enum ActionKind {
    Walking,
    Idle,
    Jumping,
    Dead
}
namespace SpriteKind {
    export const Ground = SpriteKind.create()
    export const Cloud = SpriteKind.create()
}
/**
 * start screen
 */
/**
 * game score
 */
// dette gj√∏r at mine 2 sprites for bakker lager en infinite verden
function initGround () {
    ground1 = sprites.create(img`
        ...................................................................................ffff...........................................................................
        ..................................................................................f....f..........................................................................
        ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff......fffffffffffffffff....fffffffffffffffffffffffffffffffffffffffffffffffffffff
        .........................................................................................................ffff.....................................................
        ..................................................................................................................................................................
        ..ffff..f.......................f..ffff.........................ffff..f.............f..........................ffff..f...........f..fff.................f..fff....
        ..................................................................................................................................................................
        ...............ffff..f.........................ffff.f.......f..............ff.f........ffff..f.....ffff..f..................f...............ffff..f...............
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        `, SpriteKind.Ground)
    ground2 = sprites.create(img`
        .....................................................ffff..................ffff...................................................................................
        ....................................................f....f................f....f..................................................................................
        ffffffffffffffffffffffffffffffffffffffffffffffffffff......ffffffffffffffff......ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ....fff..f.................fff..f...........f..ffff..........................f.............f..ffff.........................ffff..f.......................f..ffff..
        ..................................................................................................................................................................
        ...............f..ffff...............f..................f..ffff.....f..ffff........f.ff..............f.......f.ffff.........................f..ffff...............
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        `, SpriteKind.Ground)
    ground1.setPosition(scene.screenWidth() / 2, 120)
    ground2.setPosition(ground1.x + scene.screenWidth(), 120)
    ground1.vx = -100
    ground2.vx = -100
    ground1.z = 2
    ground2.z = 2
}
// dette gj√∏r at de forselige spirtsene gj√∏r at figuren min l√∏per
function person () {
    raptor = sprites.create(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ..................dddd..........
        ..................dfdf..........
        ..................dddd..........
        ..................dfdf..........
        ..................ddfd..........
        ..................dddd..........
        ..................dddd..........
        ..................dddd..........
        ..................dddd..........
        ..................d..d..........
        ..................d..d..........
        ..................d..d..........
        ..................d..d..........
        ..................d..d..........
        `, SpriteKind.Player)
    run = animation.createAnimation(ActionKind.Walking, 100)
    run.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ..............ddddd.............
        ..............dfdfd.............
        ..............ddddd.............
        ..............dfdfd.............
        ..............ddfdd.............
        ..............ddddd.d...........
        ..............ddddd.d...........
        ..............ddddddd...........
        ..............ddddd.............
        ..............ddddd.............
        ..............ddddd.............
        ..............ddddd.............
        ..............ddddd.............
        ..............d...d.............
        ..............d...d.............
        ..............d...dd............
        ..............d....dd...........
        ..............d.....d...........
        `)
    run.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............ddddd............
        ...............dfdfd..d.........
        ...............ddddd..d.........
        ...............dfdfd..d.........
        ...............ddfdd..d.........
        ...............ddddd..d.........
        ...............dddddddd.........
        ...............ddddd............
        ...............ddddd............
        ...............ddddd............
        ...............ddddd............
        ...............ddddd............
        ...............d...d............
        ..............dd...d............
        .............d.....d............
        .............d.....d............
        .............d.....d............
        `)
    animation.attachAnimation(raptor, run)
    jump = animation.createAnimation(ActionKind.Jumping, 200)
    jump.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        .....................dddd.......
        ....................dddfd.......
        ....................ddddd.......
        ...................dddd.........
        ...................dddd.........
        ..................dddddddd......
        ..................dddd...d......
        ..................ddd...........
        .................dddd...........
        .................d..d...........
        .................d..d...........
        .................d..d...........
        ................................
        ................................
        `)
    animation.attachAnimation(raptor, jump)
    dead = animation.createAnimation(ActionKind.Dead, 200)
    dead.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ....................222.........
        ...................2............
        ..................222...........
        .................222............
        ................2.......22......
        ..............2.2.dddd...22.....
        ..............22..dfdf....2.....
        ...............22.dddd.....2....
        ..................ddf2..........
        ..................dfdfd2........
        ..................dddd.d........
        .............2....2d2d.d........
        .............2..2.dd2d.2........
        .............2222.2ddd......2...
        ..............2222d..d......2...
        ................22d..2......2...
        ..................2..2......2...
        ..................d..d.....22...
        `)
    animation.attachAnimation(raptor, dead)
    raptor.z = 3
    raptor.setPosition(15, 94)
}
controller.anyButton.onEvent(ControllerButtonEvent.Pressed, function () {
    if (raptor.y == 94 && end == 0) {
        raptor.vy = -160
        animation.setAction(raptor, ActionKind.Jumping)
    }
})
// gj√∏r at du taper
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    end = 1
    animation.setAction(raptor, ActionKind.Dead)
    pause(50)
    game.over(false, effects.dissolve)
})
let cloud: Sprite = null
let cactus: Sprite = null
let choice = 0
let dead: animation.Animation = null
let jump: animation.Animation = null
let run: animation.Animation = null
let raptor: Sprite = null
let ground2: Sprite = null
let ground1: Sprite = null
let end = 0
let idle = null
game.splash("knock off google dino spill")
scene.setBackgroundColor(1)
initGround()
person()
info.setScore(0)
end = 0
game.showLongText("Trykk p√• A for og hoppe", DialogLayout.Top)
game.onUpdate(function () {
    if (raptor.y < 94) {
        raptor.ay = 400
    } else {
        raptor.ay = 0
        raptor.y = 94
        if (end == 0) {
            animation.setAction(raptor, ActionKind.Walking)
        }
    }
})
// gj√∏r at kaktusen kommer inn i spillet
game.onUpdateInterval(1000, function () {
    choice = randint(0, 4)
    if (choice == 0) {
        cactus = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ..............777...............
            .............77777..............
            .............77777..............
            .............77777...7..........
            .........7...77777..777.........
            ........777..77777..777.........
            ........777..77777..777.........
            ........777..77777..777.........
            ........7777777777..777.........
            ........7777777777..777.........
            .........77777777777777.........
            .............7777777777.........
            .............777777777..........
            .............77777..............
            .............77777..............
            .............77777..............
            .............77777..............
            .............77777..............
            .............77777..............
            .............77777..............
            `, ground1.vx, 0)
        cactus.y = 94
        cactus.z = 2
    } else if (choice == 1) {
        cactus = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ..............777...............
            .............77777..............
            .............77777..............
            .............77777..............
            .........7...77777...7..........
            ........777..77777..777.........
            ........777..77777..777.........
            ........777..77777..777.........
            ........777..7777777777.........
            ........777..7777777777.........
            ........77777777777777..........
            ........7777777777..............
            .........777777777..............
            .............77777..............
            .............77777..............
            .............77777..............
            .............77777..............
            .............77777..............
            .............77777..............
            .............77777..............
            `, ground1.vx, 0)
        cactus.y = 94
        cactus.z = 2
    } else if (choice == 2) {
        cactus = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ...........7....................
            ..........777...................
            ..........777......7............
            ........7.777.....777...........
            ........7.777.....777.7.........
            ........77777.7...777.7.........
            ..........777.7.7.77777.........
            ..........77777.7.777...........
            ..........777...77777...........
            ..........777.....777...........
            ..........777.....777...........
            ..........777.....777...........
            `, ground1.vx, 0)
        cactus.y = 94
        cactus.z = 2
    }
})
game.onUpdateInterval(1000, function () {
    ground1.vx += -1
    ground2.vx += -1
})
// gj√∏r at du ser skyer noen ganger
game.onUpdateInterval(1500, function () {
    if (Math.percentChance(51)) {
        cloud = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................7777.77.........
            ...............77.....7.........
            .............777......777.......
            .............7..........7777....
            .............7.............7....
            ..........7777.............777..
            .........77..................7..
            .....77777...................77.
            .....7........................7.
            .77.77..7......................7
            77.......77777777777777777777777
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `, ground1.vx / 4, 0)
        cloud.y = randint(20, 60)
        cloud.setKind(SpriteKind.Cloud)
        cloud.z = 1
    }
})
forever(function () {
    if (ground2.x < -1 * (scene.screenWidth() / 2)) {
        ground2.x = ground1.x + scene.screenWidth()
    }
})
forever(function () {
    if (ground1.x < -1 * (scene.screenWidth() / 2)) {
        ground1.x = ground2.x + scene.screenWidth()
    }
})
game.onUpdateInterval(200, function () {
    info.changeScoreBy(2)
})
